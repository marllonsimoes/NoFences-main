<Controls:MetroWindow x:Class="NoFences.View.WhatsThat"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:NoFences.View"
             xmlns:Controls="http://metro.mahapps.com/winfx/xaml/controls"
             xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
             mc:Ignorable="d" d:DesignHeight="768" d:DesignWidth="1024" 
             Width="1600" 
             Height="900" 
             ResizeMode="NoResize" 
             WindowStartupLocation="CenterScreen"
             Title="Monitored Paths"
             Loaded="MetroWindow_Loaded"
             Closing="MetroWindow_Closing" Activated="MetroWindow_Activated">
    <Controls:MetroWindow.Resources>
        <ResourceDictionary>
            <Style x:Key="LargeTileStyle" TargetType="Controls:Tile">
                <Setter Property="Height" Value="125" />
                <Setter Property="TextOptions.TextFormattingMode" Value="Display" />
                <Setter Property="TextOptions.TextRenderingMode" Value="ClearType" />
                <Setter Property="TitleFontSize" Value="14" />
                <Setter Property="Width" Value="300" />
            </Style>

            <Style x:Key="SmallTileStyle" TargetType="Controls:Tile">
                <Setter Property="Height" Value="125" />
                <Setter Property="TextOptions.TextFormattingMode" Value="Ideal" />
                <Setter Property="TextOptions.TextRenderingMode" Value="ClearType" />
                <Setter Property="TitleFontSize" Value="10" />
                <Setter Property="Width" Value="147" />
            </Style>

            <Style TargetType="iconPacks:PackIconModern" x:Key="AddIconTile">
                <Setter Property="Kind" Value="Folder" />
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Id}" Value="0" >
                        <Setter Property="Kind" Value="Add" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>

        </ResourceDictionary>
    </Controls:MetroWindow.Resources>

    <Controls:MetroWindow.RightWindowCommands>
        <Controls:WindowCommands>
            <Button Content="Deploy CupCakes">
                <Button.ContentTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <iconPacks:PackIconModern Width="22"
                                        Height="22"
                                        VerticalAlignment="Center"
                                        Kind="FoodCupcake" />
                            <TextBlock Margin="4 0 0 0"
                                 VerticalAlignment="Center"
                                 Text="{Binding}" />
                        </StackPanel>
                    </DataTemplate>
                </Button.ContentTemplate>
            </Button>
        </Controls:WindowCommands>
    </Controls:MetroWindow.RightWindowCommands>

    <ItemsControl ItemsSource="{Binding MonitoredPaths}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Controls:Tile Title="{Binding FolderName}"
                        Margin="3"
                        Foreground="White"
                        Background="Purple"
                        HorizontalTitleAlignment="Right"
                        Command="{Binding RelativeSource={
                            RelativeSource FindAncestor, 
                            AncestorType={x:Type Window}},
                            Path=DataContext.OpenFlyoutCommand}"
                        CommandParameter="{x:Reference MonitoredPathFlyout}"
                        Click="EditMonitoredPath">
                    
                    <iconPacks:PackIconModern Width="40"
                        Height="40" Style="{StaticResource AddIconTile}"/>
                </Controls:Tile>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>

    <Controls:MetroWindow.Flyouts>
        <Controls:FlyoutsControl x:Name="flyoutsControl">
            <local:MonitoredPathFlyout x:Name="MonitoredPathFlyout">
            </local:MonitoredPathFlyout>

            <Controls:Flyout x:Name="SettingsFlyout"
                        Header="Cool"
                        Position="Right">
                <Grid Width="270" Margin="10">
                    <Grid.Resources >
                        <Style TargetType="Label">
                            <Setter Property="Margin" Value="3"/>
                        </Style>
                        <Style TargetType="TextBox">
                            <Setter Property="Margin" Value="3"/>
                        </Style>
                        <Style TargetType="TextBlock">
                            <Setter Property="Margin" Value="3"/>
                        </Style>
                        <Style TargetType="Button">
                            <Setter Property="Margin" Value="3"/>
                        </Style>
                        <Style TargetType="ListBox">
                            <Setter Property="Margin" Value="3"/>
                        </Style>
                        <Style TargetType="ToggleButton">
                            <Setter Property="Margin" Value="3"/>
                        </Style>
                    </Grid.Resources>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Label Grid.Row="0"
                           Grid.Column="0"
                           Margin="5"
                           VerticalAlignment="Center"
                           Content="Download language:" />
                    <ComboBox x:Name="flyoutSettingsComboboxDownloadlanguage"
                              Grid.Row="0"
                              Grid.Column="1"
                              Margin="0 5 5 5"
                              VerticalAlignment="Center" />
                    <UniformGrid Grid.Row="2"
                                 Grid.Column="0"
                                 Grid.ColumnSpan="2"
                                 Margin="10"
                                 Columns="3">
                        <CheckBox IsChecked="{Binding AnimateOnPositionChange}">Animate</CheckBox>
                        <Button Margin="10"
                                Command="{Binding MoveLeftFlyoutCommand}"
                                CommandParameter="{x:Reference SettingsFlyout}"
                                Content="Left"
                                Style="{DynamicResource MahApps.Styles.Button.Accent.Win10}" />
                        <Button Margin="10"
                                Command="{Binding MoveRightFlyoutCommand}"
                                CommandParameter="{x:Reference SettingsFlyout}"
                                Content="Right"
                                Style="{DynamicResource MahApps.Styles.Button.Accent.Win10}" />
                    </UniformGrid>
                </Grid>
            </Controls:Flyout>

            <Controls:Flyout x:Name="LeftFlyout"
                        Header="Left"
                        Position="Left">
                <StackPanel Width="150" Margin="5 5 5 5">
                    <TextBlock Text="a test for left" />
                    <CheckBox Content="a simple checkbox" />
                    <RadioButton Content="a simple RadioButton" />
                    <ComboBox>
                        <ComboBoxItem>Item 1</ComboBoxItem>
                        <ComboBoxItem>Item 2</ComboBoxItem>
                        <ComboBoxItem>Item 3</ComboBoxItem>
                    </ComboBox>
                </StackPanel>
            </Controls:Flyout>

            <Controls:Flyout x:Name="CustomTopFlyout"
                        Margin="50 0 50 0"
                        CloseButtonVisibility="Collapsed"
                        Header="Top"
                        IsModal="True"
                        Position="Top"
                        Theme="Light"
                        TitleVisibility="Collapsed">
                <Grid Height="150">
                    <TextBlock Margin="10"
                               FontSize="22"
                               Text="Flyout on the top..." />
                    <Grid VerticalAlignment="Bottom" Background="{DynamicResource MahApps.Brushes.Accent2}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <Button Grid.Column="1"
                                Margin="5"
                                Content="_Save"
                                IsEnabled="False"
                                Style="{DynamicResource MahApps.Styles.Button.Flat}" />
                        <Button Grid.Column="2"
                                Margin="5"
                                Command="{Binding CloseFlyoutCommand}"
                                CommandParameter="{x:Reference CustomTopFlyout}"
                                Content="_Close"
                                IsCancel="True"
                                Style="{DynamicResource MahApps.Styles.Button.Flat}" />
                    </Grid>
                </Grid>
            </Controls:Flyout>

            <Controls:Flyout x:Name="TopFlyout"
                        Height="150"
                        Header="Top"
                        Position="Top">
                <StackPanel Height="80"
                            Margin="5"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom"
                            Orientation="Horizontal">
                    <Button Width="36"
                            Height="36"
                            Style="{DynamicResource MahApps.Styles.Button.Circle}">
                        <iconPacks:PackIconModern Kind="Alert" />
                    </Button>
                </StackPanel>
            </Controls:Flyout>

            <Controls:Flyout x:Name="BottomFlyout"
                        Header="Bottom"
                        Position="Bottom">
                <StackPanel Height="80"
                            Margin="5 5 5 5"
                            HorizontalAlignment="Right"
                            Orientation="Horizontal">
                    <Button Width="36"
                            Height="36"
                            FontFamily="Segoe UI Symbol"
                            FontSize="16"
                            Style="{DynamicResource MahApps.Styles.Button.Circle}">
                        <iconPacks:PackIconModern Kind="Add" />
                    </Button>
                </StackPanel>
            </Controls:Flyout>

            <Controls:Flyout x:Name="ModalFlyout"
                        Header="Modal"
                        IsModal="True"
                        Position="Right">
                <StackPanel Height="80"
                            Margin="5 5 5 5"
                            Orientation="Horizontal">
                    <TextBlock>Modal Flyout</TextBlock>
                </StackPanel>
            </Controls:Flyout>

            <Controls:Flyout x:Name="AppBarFlyout"
                        Height="75"
                        CloseButtonVisibility="Collapsed"
                        IsPinned="False"
                        Position="Bottom"
                        TitleVisibility="Collapsed">
                <TextBlock VerticalAlignment="Center" Text="This is an AppBar" />
            </Controls:Flyout>

            <Controls:Flyout x:Name="AutoCloseFlyout"
                        AutoCloseInterval="6000"
                        CloseButtonVisibility="Collapsed"
                        Header="AutoClose"
                        IsAutoCloseEnabled="True"
                        Position="Right">
                <StackPanel Width="400"
                            Margin="10"
                            SnapsToDevicePixels="True">
                    <CheckBox Margin="4"
                              Content="AutoClose Enabled"
                              IsChecked="{Binding IsAutoCloseEnabled, ElementName=AutoCloseFlyout, Mode=TwoWay}" />
                    <Slider Margin="4"
                            IsSnapToTickEnabled="True"
                            Maximum="12000"
                            Minimum="2000"
                            TickFrequency="2000"
                            Value="{Binding AutoCloseInterval, ElementName=AutoCloseFlyout, Mode=TwoWay}" />
                    <TextBlock Margin="4">
                        <Run Text="This flyout will auto close after " />
                        <Run Text="{Binding AutoCloseInterval, ElementName=AutoCloseFlyout, Mode=OneWay}" />
                        <Run Text=" milliseconds" />
                    </TextBlock>
                </StackPanel>
            </Controls:Flyout>
        </Controls:FlyoutsControl>
    </Controls:MetroWindow.Flyouts>

    
</Controls:MetroWindow>
